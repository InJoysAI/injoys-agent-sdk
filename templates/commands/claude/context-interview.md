---
description: 深度访谈以完善技术规格或用户指定的文档说明书
---

# Context Interview

通过深入、探究式的访谈，将草稿规格说明转化为完整的技术文档，或从零开始探索需求。

## 使用模式

### 模式1: 完善现有文档
基于现有文档进行深度访谈并更新该文档。

```
/context-interview
目标文档: @openspec/proposal-roadmap.md
```

### 模式2: 需求探索（更新 .context）
从对话开始探索需求或技术细节，根据主题更新对应的 `.context/` 文件。

```
/context-interview
主题: 用户认证的业务规则
```

**主题映射到 .context 目录：**
| 主题类型 | 目标文件 |
|---------|---------|
| 业务规则、用户故事 | `.context/domain/business_rules.md` |
| 用户旅程、交互流程 | `.context/domain/user_journeys.md` |
| 系统设计、组件架构 | `.context/architecture/system_design.md` |
| 技术栈、依赖 | `.context/architecture/tech_stack.md` |
| API 策略、接口设计 | `.context/architecture/api_strategy.md` |
| 安全策略、权限 | `.context/architecture/security_policy.md` |
| UI/UX 设计 | `.context/ui/` 相关文件 |
| 项目准则 | `.context/criterion.md` |

---

## 交互示例

```
用户: /context-interview
      主题: 用户认证的业务规则

AI:   [读取 .context/domain/business_rules.md 现有内容...]
      
      根据现有业务规则，我有以下问题需要确认：
      
      1. 用户登录失败后的锁定策略是什么？连续失败几次后锁定？锁定时长？
      2. 是否需要支持多设备同时登录？如果是，有数量限制吗？
      3. Token 过期时间如何设定？是否需要 refresh token 机制？

用户: 1. 5次失败后锁定30分钟
      2. 最多3个设备同时登录
      3. access token 2小时，refresh token 7天

AI:   明白了。关于多设备登录，还有几个问题：
      
      1. 当超过3个设备时，是踢掉最早的设备还是拒绝新登录？
      2. 用户能否主动查看和管理已登录设备？
      ...
      
      [访谈继续，直到所有关键问题都已明确]
      
      [更新 .context/domain/business_rules.md]
      
      ✅ 访谈完成。已更新以下内容：
      - BR-AUTH-001: 登录失败锁定策略
      - BR-AUTH-002: 多设备登录限制
      - BR-AUTH-003: Token 过期策略
```

---

## 触发条件

- 存在 `proposal-roadmap.md` 或用户指定文档需要通过系统性提问来完善需求
- 触发词："帮我完善这个 plan"、"问我关于项目的问题"、"讨论一下需求"
- 草稿规格需要全面细化时
- 需要从零开始探索某个领域的需求或技术决策

## 执行流程

1. **确定访谈模式**
   - 如果用户指定了文档 → 模式1（完善文档）
   - 如果用户指定了主题 → 模式2（需求探索）
   - 如果都未指定 → 询问用户

2. **读取相关上下文**
   - 模式1: 读取目标文档
   - 模式2: 读取 `.context/` 下对应领域的现有内容

3. **分析并准备问题**
   - 识别需要完善的领域：技术实现、UI/UX设计、边缘情况、风险考量、权衡取舍、架构决策
   - 列出需要深入探讨的关键问题

4. **开始系统性访谈**
   - 使用 `AskUserQuestionTool`与用户进行交互式访谈
   - 每次提出 2-3 个深度问题（非显而易见的问题）
   - 根据用户回答进一步追问

5. **访谈主题覆盖（按需）**
   - **技术实现**: 技术栈选择、性能要求、扩展性考虑
   - **UI/UX**: 用户流程、交互模式、无障碍需求
   - **边缘情况**: 异常处理、并发场景、数据边界
   - **风险考量**: 安全风险、依赖风险、技术债务
   - **权衡取舍**: 方案对比、优缺点分析
   - **架构决策**: 组件划分、接口设计、数据流

6. **更新目标文件**
   - 模式1: 更新用户指定的文档
   - 模式2: 更新 `.context/` 下对应的文件
   - 确保所有关键决策都已记录
   - 标记任何仍需后续确认的事项

7. **结束访谈**
   - 当所有关键问题都已探讨完毕时结束
   - 生成访谈总结，列出主要决策点和更新的文件

$ARGUMENTS
