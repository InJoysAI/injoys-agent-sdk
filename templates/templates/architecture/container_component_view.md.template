# å®¹å™¨ä¸ç»„ä»¶è§†å›¾æ¨¡æ¿ (Container and Component View Template)

> **Metadata**
> - **Source**: `{{æ¶æ„è®¾è®¡æ–‡æ¡£è·¯å¾„}}`
> - **Generated At**: `{{ç”Ÿæˆæ—¶é—´ YYYY-MM-DD HH:mm}}`
> - **Generator**: `Context-Agent v1.0`

---

## ğŸ—ï¸ å®¹å™¨è§†å›¾ (C4 Level 2)

```mermaid
C4Container
    title {{ç³»ç»Ÿåç§°}} - Container Diagram

    Person(user, "ç”¨æˆ·", "ç»ˆç«¯ç”¨æˆ·")

    Container_Boundary(system, "{{ç³»ç»Ÿåç§°}}") {
        Container(web, "Web App", "React", "ç”¨æˆ·ç•Œé¢")
        Container(api, "API Gateway", "Kong", "è·¯ç”±ã€è®¤è¯ã€é™æµ")
        Container(svc1, "User Service", "Go", "ç”¨æˆ·ç®¡ç†")
        Container(svc2, "Content Service", "Python", "å†…å®¹å¤„ç†")
        ContainerDb(db, "PostgreSQL", "ä¸»æ•°æ®åº“")
        ContainerDb(cache, "Redis", "ç¼“å­˜")
        Container(mq, "RabbitMQ", "æ¶ˆæ¯é˜Ÿåˆ—")
    }

    Rel(user, web, "ä½¿ç”¨", "HTTPS")
    Rel(web, api, "è°ƒç”¨", "HTTPS")
    Rel(api, svc1, "è·¯ç”±", "gRPC")
    Rel(api, svc2, "è·¯ç”±", "gRPC")
    Rel(svc1, db, "è¯»å†™", "JDBC")
    Rel(svc1, cache, "è¯»å†™", "Redis")
    Rel(svc2, mq, "å‘å¸ƒ", "AMQP")
```

---

## ğŸ“¦ å®¹å™¨æ¸…å•

| å®¹å™¨ | æŠ€æœ¯æ ˆ | èŒè´£ | ç«¯å£ |
|------|--------|------|------|
| **Web App** | React 18 | ç”¨æˆ·ç•Œé¢ | 443 |
| **API Gateway** | Kong | è·¯ç”±ã€è®¤è¯ã€é™æµ | 8000 |
| **User Service** | Go + Gin | ç”¨æˆ·ç®¡ç†ã€è®¤è¯æˆæƒ | 8001 |
| **Content Service** | Python + FastAPI | å†…å®¹å¤„ç†ã€AI è°ƒç”¨ | 8002 |
| **PostgreSQL** | PostgreSQL 15 | ä¸»æ•°æ®å­˜å‚¨ | 5432 |
| **Redis** | Redis 7 | ç¼“å­˜ã€ä¼šè¯ | 6379 |
| **RabbitMQ** | RabbitMQ 3 | å¼‚æ­¥æ¶ˆæ¯ | 5672 |

---

## ğŸ”§ ç»„ä»¶è§†å›¾ (C4 Level 3)

> ä»…é’ˆå¯¹å¤æ‚/æ ¸å¿ƒå®¹å™¨å±•å¼€

### User Service ç»„ä»¶

```mermaid
C4Component
    title User Service - Component Diagram

    Container_Boundary(svc, "User Service") {
        Component(ctrl, "UserController", "Gin Handler", "å¤„ç† HTTP è¯·æ±‚")
        Component(auth, "AuthService", "Service", "è®¤è¯é€»è¾‘")
        Component(user, "UserService", "Service", "ç”¨æˆ· CRUD")
        Component(repo, "UserRepository", "GORM", "æ•°æ®è®¿é—®")
    }

    Rel(ctrl, auth, "è°ƒç”¨")
    Rel(ctrl, user, "è°ƒç”¨")
    Rel(auth, repo, "æŸ¥è¯¢")
    Rel(user, repo, "CRUD")
```

| ç»„ä»¶ | èŒè´£ | æ¥å£ |
|------|------|------|
| **UserController** | HTTP è¯·æ±‚å¤„ç† | REST API |
| **AuthService** | ç™»å½•ã€Token ç®¡ç† | å†…éƒ¨æ¥å£ |
| **UserService** | ç”¨æˆ· CRUD | å†…éƒ¨æ¥å£ |
| **UserRepository** | æ•°æ®è®¿é—®å±‚ | GORM |

---

## ğŸ”— æ¥å£è§„èŒƒ

| æœåŠ¡ | è§„èŒƒç±»å‹ | é“¾æ¥ |
|------|---------|------|
| User Service | OpenAPI 3.0 | `api/user-service.yaml` |
| Content Service | OpenAPI 3.0 | `api/content-service.yaml` |
| Event Schema | AsyncAPI 2.0 | `api/events.yaml` |
| gRPC | Proto | `proto/*.proto` |
