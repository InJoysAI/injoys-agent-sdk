# API ç­–ç•¥æ¨¡æ¿ (API Strategy Template)

> **Metadata**
> - **Source**: `{{æ¶æ„è®¾è®¡æ–‡æ¡£è·¯å¾„}}`
> - **Generated At**: `{{ç”Ÿæˆæ—¶é—´ YYYY-MM-DD HH:mm}}`
> - **Generator**: `Context-Agent v1.0`

---

## ğŸ“¡ åè®®æ ‡å‡†

| åœºæ™¯ | åè®® | è§„èŒƒ |
|------|------|------|
| **å…¬å¼€ API** | REST | OpenAPI 3.0 |
| **å†…éƒ¨æœåŠ¡** | gRPC | Proto3 |
| **å¼‚æ­¥äº‹ä»¶** | AMQP | AsyncAPI 2.0 |
| **å®æ—¶é€šä¿¡** | WebSocket | - |

---

## ğŸ”¢ ç‰ˆæœ¬ç­–ç•¥

| ç­–ç•¥ | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| **URI Versioning** | `/api/v{major}/*` | `/api/v1/users` |
| **Header Versioning** | `Accept-Version: v1` | å¤‡ç”¨æ–¹æ¡ˆ |

### ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ

| ç‰ˆæœ¬çŠ¶æ€ | æè¿° | æ”¯æŒæœŸé™ |
|---------|------|---------|
| **Current** | å½“å‰ä¸»ç‰ˆæœ¬ | æŒç»­æ”¯æŒ |
| **Deprecated** | åºŸå¼ƒç‰ˆæœ¬ | 6ä¸ªæœˆè¿‡æ¸¡æœŸ |
| **Sunset** | å·²ä¸‹çº¿ | ä¸å†æ”¯æŒ |

---

## ğŸ”— URL è§„èŒƒ

### å‘½åè§„åˆ™

| è§„åˆ™ | ç¤ºä¾‹ |
|------|------|
| èµ„æºç”¨å¤æ•°åè¯ | `/users`, `/orders` |
| ä½¿ç”¨ kebab-case | `/user-profiles` |
| åµŒå¥—èµ„æº | `/users/{id}/orders` |
| åŠ¨ä½œä½¿ç”¨åŠ¨è¯ | `/orders/{id}/cancel` |

### æ ‡å‡†ç«¯ç‚¹

| æ“ä½œ | HTTP æ–¹æ³• | URL | æè¿° |
|------|----------|-----|------|
| åˆ—è¡¨ | GET | `/resources` | è·å–èµ„æºåˆ—è¡¨ |
| åˆ›å»º | POST | `/resources` | åˆ›å»ºèµ„æº |
| è·å– | GET | `/resources/{id}` | è·å–å•ä¸ªèµ„æº |
| æ›´æ–° | PUT/PATCH | `/resources/{id}` | æ›´æ–°èµ„æº |
| åˆ é™¤ | DELETE | `/resources/{id}` | åˆ é™¤èµ„æº |

---

## âŒ é”™è¯¯ç è§„èŒƒ

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "error": {
    "code": "USER_NOT_FOUND",
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "details": {
      "user_id": "123"
    },
    "trace_id": "abc-123-def"
  }
}
```

### é”™è¯¯ç åˆ†ç±»

| HTTP çŠ¶æ€ç  | é”™è¯¯ç±»å‹ | ç¤ºä¾‹ |
|------------|---------|------|
| 400 | è¯·æ±‚é”™è¯¯ | INVALID_PARAMETER |
| 401 | è®¤è¯å¤±è´¥ | UNAUTHORIZED |
| 403 | æƒé™ä¸è¶³ | FORBIDDEN |
| 404 | èµ„æºä¸å­˜åœ¨ | NOT_FOUND |
| 409 | å†²çª | CONFLICT |
| 429 | é™æµ | RATE_LIMITED |
| 500 | æœåŠ¡å™¨é”™è¯¯ | INTERNAL_ERROR |

---

## ğŸ”„ å¹‚ç­‰æ€§

| åœºæ™¯ | å®ç°æ–¹å¼ |
|------|---------|
| **åˆ›å»ºè®¢å•** | å®¢æˆ·ç«¯ç”Ÿæˆ Idempotency-Key |
| **æ”¯ä»˜è¯·æ±‚** | æœåŠ¡ç«¯æ£€æŸ¥ request_id å»é‡ |
| **æ¶ˆæ¯å¤„ç†** | åŸºäº message_id å¹‚ç­‰æ¶ˆè´¹ |

---

## âš¡ é™æµç­–ç•¥

| ç«¯ç‚¹ç±»å‹ | é™åˆ¶ | çª—å£ |
|---------|------|------|
| å…¬å¼€ API | 100 req/min | æ»‘åŠ¨çª—å£ |
| è®¤è¯æ¥å£ | 10 req/min | å›ºå®šçª—å£ |
| å†…éƒ¨æœåŠ¡ | æ— é™åˆ¶ | - |

### é™æµå“åº”

```http
HTTP/1.1 429 Too Many Requests
Retry-After: 60
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1609459200
```

---

## ğŸ” è®¤è¯çŸ©é˜µ

| ç«¯ç‚¹ | è®¤è¯æ–¹å¼ | æ‰€éœ€æƒé™ |
|------|---------|---------|
| `GET /users/me` | Bearer Token | user:read |
| `PUT /users/{id}` | Bearer Token | user:write (own) |
| `GET /admin/users` | Bearer Token | admin:users:read |
| `POST /internal/sync` | API Key | internal |
