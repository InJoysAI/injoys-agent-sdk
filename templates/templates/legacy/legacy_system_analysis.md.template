# 遗留系统分析 (Legacy System Analysis)

> **Metadata**
> - **Source**: `{{CODEBASE_PATH}}`
> - **Generated At**: `{{GENERATED_AT}}`
> - **Generator**: `Context-Agent v1.0`

---

## 📋 概览

| 属性 | 值 |
|------|-----|
| **项目名称** | {{PROJECT_NAME}} |
| **代码库路径** | `{{CODEBASE_PATH}}` |
| **主要语言** | {{LANGUAGE}} |
| **框架** | {{FRAMEWORK}} |
| **代码行数** | {{LOC}} |
| **最后提交** | {{LAST_COMMIT_DATE}} |

---

## 🏗️ 项目结构

```
{{PROJECT_NAME}}/
├── {{DIR_1}}/              # {{PURPOSE_1}}
│   ├── {{SUBDIR}}/         # {{PURPOSE}}
│   └── {{FILE}}            # {{PURPOSE}}
├── {{DIR_2}}/              # {{PURPOSE_2}}
└── {{DIR_3}}/              # {{PURPOSE_3}}
```

---

## 📦 技术栈

### 语言与运行时

| 技术 | 版本 | 备注 |
|------|------|------|
| {{LANGUAGE}} | {{VERSION}} | {{NOTES}} |

### 框架与库

| 依赖 | 版本 | 用途 |
|------|------|------|
| {{DEPENDENCY_1}} | {{VERSION}} | {{PURPOSE}} |
| {{DEPENDENCY_2}} | {{VERSION}} | {{PURPOSE}} |

---

## 🔧 核心模块

| 模块 | 职责 | 关键文件 | 依赖模块 |
|------|------|---------|----------|
| {{MODULE_1}} | {{RESPONSIBILITY}} | `{{FILES}}` | {{DEPS}} |
| {{MODULE_2}} | {{RESPONSIBILITY}} | `{{FILES}}` | {{DEPS}} |

---

## 🌐 API/接口清单

| 方法 | 路径 | 处理函数 | 说明 |
|------|------|---------|------|
| {{METHOD}} | `{{PATH}}` | `{{HANDLER}}` | {{DESC}} |

---

## 💾 数据模型

| 实体/表 | 关键字段 | 关联 |
|---------|---------|------|
| {{ENTITY}} | {{FIELDS}} | {{RELATIONS}} |

---

## ⚙️ 配置管理

| 配置文件 | 位置 | 用途 |
|----------|------|------|
| {{CONFIG_FILE}} | `{{PATH}}` | {{PURPOSE}} |

### 环境变量

| 变量名 | 必需 | 说明 |
|--------|:----:|------|
| `{{ENV_VAR}}` | ✅/⚠️ | {{DESC}} |

---

## ✅ 代码风格约定

### {{CONVENTION_1}} (如: 错误处理)

```{{LANGUAGE}}
{{CODE_EXAMPLE}}
```

### {{CONVENTION_2}} (如: 依赖注入)

```{{LANGUAGE}}
{{CODE_EXAMPLE}}
```

---

## 🔒 必须保留的模式

| 模式 | 位置 | 原因 |
|------|------|------|
| {{PATTERN}} | `{{PATH}}` | {{REASON}} |

---

## 🚫 禁止修改的文件

| 文件 | 原因 |
|------|------|
| `{{FILE_PATH}}` | {{REASON}} |

---

## ⚠️ 已知问题 / 技术债

| 问题 | 严重性 | 位置 | 建议 |
|------|:------:|------|------|
| {{ISSUE}} | 高/中/低 | `{{PATH}}` | {{SUGGESTION}} |

---

## 🧪 测试情况

| 类型 | 覆盖率 | 位置 | 备注 |
|------|:------:|------|------|
| 单元测试 | {{COV}}% | `{{PATH}}` | {{NOTES}} |
| 集成测试 | {{COV}}% | `{{PATH}}` | {{NOTES}} |

---

## 🤖 AI 生成新代码时的约束

生成代码时**必须遵循**以下规则：

1. **新 Handler 必须**:
   - {{CONSTRAINT_1}}
   - {{CONSTRAINT_2}}

2. **数据库操作必须**:
   - {{CONSTRAINT}}

3. **错误处理必须**:
   - {{CONSTRAINT}}

---

## 📝 典型代码模板

### {{TEMPLATE_NAME_1}}

```{{LANGUAGE}}
{{CODE_TEMPLATE}}
```

### {{TEMPLATE_NAME_2}}

```{{LANGUAGE}}
{{CODE_TEMPLATE}}
```
